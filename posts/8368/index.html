<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="蒜物语——HTML 与 WebGL 的融合之旅"><meta name="keywords" content=""><meta name="author" content="alphardex"><meta name="copyright" content="alphardex"><title>蒜物语——HTML 与 WebGL 的融合之旅 | 名無声</title><link rel="shortcut icon" href="/mygo/img/favicon.ico"><link rel="stylesheet" href="/mygo/css/index.css?version=1.9.1"><link rel="stylesheet" href="/mygo/css/mygo.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/mygo/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '7.2.0'
} </script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/mygo/atom.xml" title="名無声" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML"><span class="toc-number">1.</span> <span class="toc-text">HTML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E5%85%A8%E5%B1%8F%E5%8A%A8%E7%94%BB%E7%89%B9%E6%95%88"><span class="toc-number">2.</span> <span class="toc-text">图片全屏动画特效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E5%AD%97%E7%BD%91%E6%A0%BC%E5%BC%8F%E6%98%BE%E7%8E%B0%E7%89%B9%E6%95%88"><span class="toc-number">3.</span> <span class="toc-text">文字网格式显现特效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF%E5%BE%AE%E7%B2%92%E7%89%B9%E6%95%88"><span class="toc-number">4.</span> <span class="toc-text">背景微粒特效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%BB%E9%9D%A2%E5%87%B8%E8%B5%B7%E7%89%B9%E6%95%88"><span class="toc-number">5.</span> <span class="toc-text">画面凸起特效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%BB%E9%9D%A2-RGB-%E6%89%AD%E6%9B%B2%E7%89%B9%E6%95%88"><span class="toc-number">6.</span> <span class="toc-text">画面 RGB 扭曲特效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-number">7.</span> <span class="toc-text">最后</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s2.loli.net/2024/05/21/NhyV4THWaAgOwED.jpg"></div><div class="author-info__name text-center">alphardex</div><div class="author-info__description text-center">&quot;普通&quot;とか&quot;あたりまえ&quot;ってなんだろう</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/mygo/archives"><span class="pull-left">Articles</span><span class="pull-right">45</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s2.loli.net/2024/05/21/HtNjkzv1FEdAVby.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/mygo/">名無声</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/mygo/">Home</a><a class="site-page" href="/mygo/archives">Archives</a><a class="site-page" href="/mygo/about">About</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">蒜物语——HTML 与 WebGL 的融合之旅</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-10-29</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>哟哈喽！这里是 alphardex。</p>
<p><a target="_blank" rel="noopener" href="https://www.agemys.net/detail/20220142">Lycoris Recoil</a>，又称“莉可丽丝”或“石蒜”，是笔者最近追完的一部番。这部番主要还是看美少女贴贴的日常，不论是 OP 的击股之交，泷奈的 Sakana~还是千束神一般的闪避能力等都令我记忆犹新。尽管后面几集剧情可能有点争议，但不影响我对这部番的喜爱。</p>
<p>目前还有在追的一部新番<a target="_blank" rel="noopener" href="https://www.agemys.net/detail/20220121">孤独摇滚</a>也不错，女主社恐的性格真的跟我十分相似（悲）。</p>
<p>最近我心血来潮，想为石蒜这部动画做一个自制的人物介绍页面，素材借用的是<a target="_blank" rel="noopener" href="https://lycoris-recoil.com/character/">动画官网的素材</a>，原本想做一个简单的包含 CSS 动画的 Swiper 滑动展示页，但转念一想，既然一直在研究 WebGL，为何不搞点更炫的东西呢？于是乎，借助我的框架<a target="_blank" rel="noopener" href="https://github.com/alphardex/kokomi.js">kokomi.js</a>之力，我成功地将一个普通的 HTML 页面一步步地转化为了一个拥有酷炫交互的 WebGL 页面。</p>
<p>页面链接在下方，点击右上的 logo 全屏观看，效果最佳：<br><a target="_blank" rel="noopener" href="https://code.juejin.cn/pen/7159562292110032900">https://code.juejin.cn/pen/7159562292110032900</a></p>
<p>本文并不会详细地去教大家如何完整地做出整个页面的效果，而是来谈谈 HTML 转 WebGL 的方法以及 WebGL 特效的一些常用技法。</p>
<span id="more"></span>

<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p>HTML 是网页最基本的框架，相信大部分时候我们前端都是在跟她打交道吧~</p>
<p>首先，我像往常一样，勾勒了页面最基本的形态，将静态页面排好</p>
<p>由于是角色展示页，有多个角色的信息需要展示在一个页上，我使用了<a target="_blank" rel="noopener" href="https://swiperjs.com/">Swiper</a>作为页面滑动的核心，再加上一些 CSS 动画，一个基本的原型就完成了</p>
<p>细心的读者会发现，如果将<code>--webgl--</code>上方的 2 行代码解除注释，就会看到最基本的 Swiper 滑动页效果</p>
<p><img src="https://s2.loli.net/2022/10/29/uS6XdB3iUapZcPQ.gif" alt="swiper.gif"></p>
<p>这部分比较简单，因此一笔带过。接下来，让我们开始向重点——WebGL 迈进</p>
<h2 id="图片全屏动画特效"><a href="#图片全屏动画特效" class="headerlink" title="图片全屏动画特效"></a>图片全屏动画特效</h2><p>在页面上有这么一个交互：点击一张缩略图时，它会自动放大至占满全屏，并且中间的动画效果比较 3D 化（类似 MAC 的那种效果）</p>
<p>借助 kokomi.js 的<a target="_blank" rel="noopener" href="https://github.com/alphardex/kokomi.js/blob/main/src/web/gallery.ts">Gallery 组件</a>，我们就能很方便地将所有的<code>img</code>图片元素转化到 WebGL 的世界中，并用顶点着色器和片元着色器来实现特效</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gallary = <span class="keyword">new</span> kokomi.<span class="title class_">Gallery</span>(base, &#123;</span><br><span class="line">  vertexShader, <span class="comment">// 顶点着色器</span></span><br><span class="line">  fragmentShader, <span class="comment">// 片元着色器</span></span><br><span class="line">  <span class="attr">materialParams</span>: &#123;</span><br><span class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="comment">// 开启透明通道</span></span><br><span class="line">  &#125;,</span><br><span class="line">  scroller, <span class="comment">// 设定页面滚动控制器</span></span><br><span class="line">  <span class="attr">elList</span>: [...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;img:not(.webgl-fixed)&quot;</span>)], <span class="comment">// 需要同步的HTML元素</span></span><br><span class="line">  <span class="attr">uniforms</span>: &#123;</span><br><span class="line">    <span class="comment">// uniform变量</span></span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>首先，我们先把 2 个数据作为 uniform 传递给 shader：图片在 DOM 世界的大小<code>uMeshSize</code>和图片位置<code>uMeshPosition</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">gallary</span>.<span class="property">makuGroup</span>.<span class="property">makus</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">maku</span>) =&gt;</span> &#123;</span><br><span class="line">  maku.<span class="property">mesh</span>.<span class="property">material</span>.<span class="property">uniforms</span>.<span class="property">uMeshSize</span>.<span class="property">value</span> = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Vector2</span>(</span><br><span class="line">    maku.<span class="property">el</span>.<span class="property">clientWidth</span>,</span><br><span class="line">    maku.<span class="property">el</span>.<span class="property">clientHeight</span></span><br><span class="line">  );</span><br><span class="line">  maku.<span class="property">mesh</span>.<span class="property">material</span>.<span class="property">uniforms</span>.<span class="property">uMeshPosition</span>.<span class="property">value</span> = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Vector2</span>(</span><br><span class="line">    maku.<span class="property">mesh</span>.<span class="property">position</span>.<span class="property">x</span>,</span><br><span class="line">    maku.<span class="property">mesh</span>.<span class="property">position</span>.<span class="property">y</span></span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>并且声明一个<code>uProgress</code>的变量，表示该动画的进度</p>
<p>接下来主要编写顶点着色器<code>vertexShader</code>，实现全屏动画<code>fullscreen</code>函数</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">vec3</span> fullscreen(<span class="type">vec3</span> p)&#123;</span><br><span class="line">    <span class="comment">// get progress</span></span><br><span class="line">    <span class="type">float</span> pr=uProgress;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// scale to view size</span></span><br><span class="line">    <span class="type">vec2</span> scale=<span class="built_in">mix</span>(<span class="type">vec2</span>(<span class="number">1.</span>),iResolution/uMeshSize,pr);</span><br><span class="line">    p.xy*=scale;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// move to center</span></span><br><span class="line">    p.x+=-uMeshPosition.x*pr;</span><br><span class="line">    p.y+=-uMeshPosition.y*pr;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// z</span></span><br><span class="line">    p.z+=pr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从小图缩放到大图，最主要的还是一个缩放比例的插值过程，从原本的 1 变化到全屏与图片本身的比例，即<code>iResolution/uMeshSize</code>，再用动画进度<code>pr</code>进行插值即可</p>
<p>缩放至全屏后，图片依旧是停留在原地的，我们需要将它挪到画面的中心，给图片的 xy 坐标分别减去图片位置<code>uMeshPosition</code>的 xy 与动画进度<code>pr</code>的积</p>
<p>js 中利用 gsap 控制动画进度即可</p>
<p><img src="https://s2.loli.net/2022/10/30/OGF7V6nhkyNY5UJ.gif" alt="1-1.gif"></p>
<p>nice，已经成功地实现了全屏动画效果，但这样还是有点普通，可以再稍微灵动一下</p>
<p>目前的动画进度<code>pr</code>是比较同步的，我们需要让它更加交错一点，可以尝试用图片 uv 坐标的 x 轴来交错它</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> getProgress2(<span class="type">float</span> pr,<span class="type">vec2</span> uv)&#123;</span><br><span class="line">    <span class="type">float</span> activation=uv.x;</span><br><span class="line">    <span class="type">float</span> latestStart=<span class="number">.5</span>;</span><br><span class="line">    <span class="type">float</span> startAt=activation*latestStart;</span><br><span class="line">    pr=<span class="built_in">smoothstep</span>(startAt,<span class="number">1.</span>,pr);</span><br><span class="line">    <span class="keyword">return</span> pr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再者，我们也可以对图片坐标本身进行一些变换，比如翻转，尝试将坐标的 x 轴翻转下试试，同时，也别忘了翻转下 uv 坐标的 x，不然图片会倒过来显示哦</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">vec3</span> flipX(<span class="type">vec3</span> p,<span class="type">float</span> pr)&#123;</span><br><span class="line">    p.x=<span class="built_in">mix</span>(p.x,-p.x,pr);</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">vec2</span> flipUvX(<span class="type">vec2</span> uv,<span class="type">float</span> pr)&#123;</span><br><span class="line">    uv.x=<span class="built_in">mix</span>(uv.x,<span class="number">1.</span>-uv.x,pr);</span><br><span class="line">    <span class="keyword">return</span> uv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> fullscreen(<span class="type">vec3</span> p)&#123;</span><br><span class="line">    <span class="comment">// copy uv</span></span><br><span class="line">    <span class="type">vec2</span> newUv=uv;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get progress</span></span><br><span class="line">    <span class="type">float</span> pr=getProgress2(uProgress,uv);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// scale to view size</span></span><br><span class="line">    <span class="type">vec2</span> scale=<span class="built_in">mix</span>(<span class="type">vec2</span>(<span class="number">1.</span>),iResolution/uMeshSize,pr);</span><br><span class="line">    p.xy*=scale;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// other transforms</span></span><br><span class="line">    p=flipX(p,pr);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> latestStart=<span class="number">.5</span>;</span><br><span class="line">    <span class="type">float</span> stepVal=latestStart-<span class="built_in">pow</span>(latestStart,<span class="number">3.</span>);</span><br><span class="line">    newUv=flipUvX(newUv,<span class="built_in">step</span>(stepVal,pr));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get uv</span></span><br><span class="line">    vUv=newUv;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// move to center</span></span><br><span class="line">    p.x+=-uMeshPosition.x*pr;</span><br><span class="line">    p.y+=-uMeshPosition.y*pr;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// z</span></span><br><span class="line">    p.z+=pr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/10/30/TDNscJg9oSvFVWh.gif" alt="1-2.gif"></p>
<p>如此，我们的全屏动画效果就完美地实现了，当然，除了翻转效果外还会有很多其他的派生变体，这就等读者去自己发掘啦~</p>
<h2 id="文字网格式显现特效"><a href="#文字网格式显现特效" class="headerlink" title="文字网格式显现特效"></a>文字网格式显现特效</h2><p>页面刚显现时我们可以看到，文字会以网格带阴影的形式显现出来，有点赛博朋克的风格</p>
<p>网页一般是由图片和文字组成的，既然图片能同步到 WebGL 世界，那么文字其实也可以，这里就要用到 kokomi.js 的<a target="_blank" rel="noopener" href="https://github.com/alphardex/kokomi.js/blob/main/src/web/moji.ts">MojiGroup 组件</a>，用法和 Gallery 组件大同小异，只不过是同步对象变成了文字而已</p>
<p>这里为什么不用中文字体？因为暂时找不到中文字体的 cdn T_T</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mg = <span class="keyword">new</span> kokomi.<span class="title class_">MojiGroup</span>(base, &#123;</span><br><span class="line">  <span class="attr">vertexShader</span>: vertexShader,</span><br><span class="line">  <span class="attr">fragmentShader</span>: fragmentShader,</span><br><span class="line">  scroller,</span><br><span class="line">  <span class="attr">uniforms</span>: &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>将句子长度<code>uGridSize</code>传入 shader</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">mg</span>.<span class="property">mojis</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">moji</span>) =&gt;</span> &#123;</span><br><span class="line">  moji.<span class="property">textMesh</span>.<span class="property">mesh</span>.<span class="property">material</span>.<span class="property">uniforms</span>.<span class="property">uGridSize</span>.<span class="property">value</span> =</span><br><span class="line">    moji.<span class="property">textMesh</span>.<span class="property">mesh</span>.<span class="property">_private_text</span>.<span class="property">length</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>利用<a target="_blank" rel="noopener" href="https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83#generic-123-noise">噪声函数</a>配合<code>floor</code>函数来形成网格状图案</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">vec2</span> grid=uGrid;</span><br><span class="line">grid.x*=uGridSize;</span><br><span class="line"><span class="type">vec2</span> gridP=<span class="type">vec2</span>(<span class="built_in">floor</span>(grid.x*p.x),<span class="built_in">floor</span>(grid.y*p.y));</span><br><span class="line"><span class="type">float</span> pattern=noise(gridP);</span><br></pre></td></tr></table></figure>

<p>定义动画进度<code>uProgress</code>，并用网格状图案对文字颜色<code>uTextColor</code>进行插值处理</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> map(<span class="type">float</span> value,<span class="type">float</span> min1,<span class="type">float</span> max1,<span class="type">float</span> min2,<span class="type">float</span> max2)&#123;</span><br><span class="line">    <span class="keyword">return</span> min2+(value-min1)*(max2-min2)/(max1-min1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> saturate(<span class="type">float</span> a)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">clamp</span>(a,<span class="number">0.</span>,<span class="number">1.</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> getMixer(<span class="type">vec2</span> p,<span class="type">float</span> pr,<span class="type">float</span> pattern)&#123;</span><br><span class="line">    <span class="type">float</span> width=<span class="number">.5</span>;</span><br><span class="line">    pr=map(pr,<span class="number">0.</span>,<span class="number">1.</span>,-width,<span class="number">1.</span>);</span><br><span class="line">    pr=<span class="built_in">smoothstep</span>(pr,pr+width,p.x);</span><br><span class="line">    <span class="type">float</span> mixer=<span class="number">1.</span>-saturate(pr*<span class="number">2.</span>-pattern);</span><br><span class="line">    <span class="keyword">return</span> mixer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="type">vec4</span> col=<span class="type">vec4</span>(<span class="number">0.</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec4</span> l0=<span class="type">vec4</span>(uShadowColor,<span class="number">1.</span>);</span><br><span class="line">    <span class="type">float</span> pr0=uProgress;</span><br><span class="line">    <span class="type">float</span> m0=getMixer(p,pr0,pattern);</span><br><span class="line">    col=<span class="built_in">mix</span>(col,l0,m0);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样的可以定义文字阴影<code>uShadowColor</code>，以同样的方式定义另一个动画进度<code>uProgress1</code>并进行插值处理</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">vec4</span> l1=<span class="type">vec4</span>(uTextColor,<span class="number">1.</span>);</span><br><span class="line"><span class="type">float</span> pr1=uProgress1;</span><br><span class="line"><span class="type">float</span> m1=getMixer(p,pr1,pattern);</span><br><span class="line">col=<span class="built_in">mix</span>(col,l1,m1);</span><br></pre></td></tr></table></figure>

<p>js 中利用 gsap 控制 2 个动画进度即可，可以用<code>stagger</code>属性来错开文字阴影的进度，以显得更加生动</p>
<p>最后的效果是这样的：</p>
<p><img src="https://s2.loli.net/2022/10/30/18EGivoy6wTulLz.gif" alt="2.gif"></p>
<h2 id="背景微粒特效"><a href="#背景微粒特效" class="headerlink" title="背景微粒特效"></a>背景微粒特效</h2><p>我们通过观察，可以注意到画面的背景是朦胧的微粒漂浮效果，能给页面整体进行一种良好的点缀</p>
<p>可以通过 kokomi.js 的<a target="_blank" rel="noopener" href="https://github.com/alphardex/kokomi.js/blob/main/src/shapes/customPoints.ts">CustomPoints 组件</a>来实现微粒特效</p>
<p>首先要定义好微粒的<code>geometry</code>，这里传入了随机的顶点位置数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BufferGeometry</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> posBuffer = kokomi.<span class="title function_">makeBuffer</span>(count, <span class="function">() =&gt;</span></span><br><span class="line">  <span class="variable constant_">THREE</span>.<span class="property">MathUtils</span>.<span class="title function_">randFloatSpread</span>(<span class="number">3</span>)</span><br><span class="line">);</span><br><span class="line">kokomi.<span class="title function_">iterateBuffer</span>(posBuffer, posBuffer.<span class="property">length</span>, <span class="function">(<span class="params">arr, axis</span>) =&gt;</span> &#123;</span><br><span class="line">  arr[axis.<span class="property">x</span>] = <span class="variable constant_">THREE</span>.<span class="property">MathUtils</span>.<span class="title function_">randFloatSpread</span>(<span class="number">3</span>);</span><br><span class="line">  arr[axis.<span class="property">y</span>] = <span class="variable constant_">THREE</span>.<span class="property">MathUtils</span>.<span class="title function_">randFloatSpread</span>(<span class="number">3</span>);</span><br><span class="line">  arr[axis.<span class="property">z</span>] = <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">geometry.<span class="title function_">setAttribute</span>(<span class="string">&quot;position&quot;</span>, <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BufferAttribute</span>(posBuffer, <span class="number">3</span>));</span><br></pre></td></tr></table></figure>

<p>初始化微粒对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cm = <span class="keyword">new</span> kokomi.<span class="title class_">CustomPoints</span>(base, &#123;</span><br><span class="line">  <span class="attr">baseMaterial</span>: <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">ShaderMaterial</span>(),</span><br><span class="line">  geometry,</span><br><span class="line">  <span class="attr">vertexShader</span>: vertexShader,</span><br><span class="line">  <span class="attr">fragmentShader</span>: fragmentShader,</span><br><span class="line">  <span class="attr">materialParams</span>: &#123;</span><br><span class="line">    <span class="attr">side</span>: <span class="variable constant_">THREE</span>.<span class="property">DoubleSide</span>,</span><br><span class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">depthWrite</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">uniforms</span>: &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在顶点着色器中，我们可以通过<a target="_blank" rel="noopener" href="https://github.com/hughsk/glsl-noise">噪声函数</a>来扭曲微粒的顶点坐标，以实现微粒随机飘动的效果</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">vec3</span> distort(<span class="type">vec3</span> p)&#123;</span><br><span class="line">    <span class="type">float</span> speed=<span class="number">.1</span>;</span><br><span class="line">    <span class="type">float</span> noise=cnoise(p)*<span class="number">.5</span>;</span><br><span class="line">    p.x+=<span class="built_in">cos</span>(iTime*speed+p.x*noise*<span class="number">100.</span>)*<span class="number">.2</span>;</span><br><span class="line">    p.y+=<span class="built_in">sin</span>(iTime*speed+p.x*noise*<span class="number">100.</span>)*<span class="number">.2</span>;</span><br><span class="line">    p.z+=<span class="built_in">cos</span>(iTime*speed+p.x*noise*<span class="number">100.</span>)*<span class="number">.5</span>;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line">    <span class="type">vec3</span> p=position;</span><br><span class="line"></span><br><span class="line">    <span class="type">vec3</span> dp=distort(p);</span><br><span class="line"></span><br><span class="line">    csm_Position=dp;</span><br><span class="line"></span><br><span class="line">    vUv=uv;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在片元着色器中，我们可以定义好微粒的形状和颜色，这里形状用了圆形，颜色是通过 uniform 传入的</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> circle(<span class="type">float</span> d,<span class="type">float</span> size,<span class="type">float</span> blur)&#123;</span><br><span class="line">    <span class="type">float</span> c=<span class="built_in">smoothstep</span>(size,size*(<span class="number">1.</span>-blur),d);</span><br><span class="line">    <span class="type">float</span> ring=<span class="built_in">smoothstep</span>(size*<span class="number">.8</span>,size,d);</span><br><span class="line">    c*=<span class="built_in">mix</span>(<span class="number">.7</span>,<span class="number">1.</span>,ring);</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line">    <span class="type">float</span> distanceToCenter=<span class="built_in">distance</span>(<span class="built_in">gl_PointCoord</span>,<span class="type">vec2</span>(<span class="number">.5</span>));</span><br><span class="line">    <span class="type">float</span> strength=circle(distanceToCenter,<span class="number">.5</span>,<span class="number">.4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec3</span> col=uColor;</span><br><span class="line"></span><br><span class="line">    csm_DiffuseColor=<span class="type">vec4</span>(col,strength);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于微粒效果本身的大小并不跟外面的<code>ScreenCamera</code>一致，因此创建了一个<a target="_blank" rel="noopener" href="https://github.com/alphardex/kokomi.js/blob/main/src/shapes/screenQuad.ts">ScreenQuad 组件</a>，再通过<a target="_blank" rel="noopener" href="https://github.com/alphardex/kokomi.js/blob/main/src/renderTargets/renderTexture.ts">RenderTexture 组件</a>将其渲染到了整个屏幕上</p>
<p>最后实现效果如下，特地把微粒个数给调多了点，以让它更加明显：</p>
<p><img src="https://s2.loli.net/2022/10/30/4DV7NBbGhAsRjZ3.gif" alt="3.gif"></p>
<h2 id="画面凸起特效"><a href="#画面凸起特效" class="headerlink" title="画面凸起特效"></a>画面凸起特效</h2><p>当我们点击右上角的头像切换人物或者用鼠标来滚动画面时，我们能看到那画面凸起的转场特效，可以说是很天马行空了</p>
<p>这种凸起特效是用后期处理实现的。kokomi.js 的<a target="_blank" rel="noopener" href="https://github.com/alphardex/kokomi.js/blob/main/src/postprocessing/customEffect.ts">CustomEffect 组件</a>能轻松实现后期处理的效果，同样只需传入 2 个着色器以及 uniform 变量，不过以下的 2 个特效都只跟片元着色器有关</p>
<p>以圆的方式来扭曲整个屏幕的顶点，这就是凸起效果的要义</p>
<p>居中 uv 坐标，获取中心点向量，并用它对 uv 坐标进行偏移操作，如果直接乘上<code>center</code>是内凹，外凸的话反转一下就行了</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">vec2</span> centerUv(<span class="type">vec2</span> uv)&#123;</span><br><span class="line">    uv=uv*<span class="number">2.</span><span class="number">-1.</span>;</span><br><span class="line">    <span class="keyword">return</span> uv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">vec2</span> distort(<span class="type">vec2</span> p)&#123;</span><br><span class="line">    <span class="type">vec2</span> cp=centerUv(p);</span><br><span class="line">    <span class="type">float</span> center=<span class="built_in">distance</span>(p,<span class="type">vec2</span>(<span class="number">.5</span>));</span><br><span class="line">    <span class="type">vec2</span> <span class="keyword">offset</span>=cp*(<span class="number">1.</span>-center)*uProgress;</span><br><span class="line">    p-=<span class="keyword">offset</span>;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line">    <span class="type">vec2</span> p=vUv;</span><br><span class="line">    p=distort(p);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec4</span> tex=<span class="built_in">texture</span>(tDiffuse,p);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec4</span> col=tex;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span>=col;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/10/30/KZd3Jb6N9hFH4GY.gif" alt="4.gif"></p>
<h2 id="画面-RGB-扭曲特效"><a href="#画面-RGB-扭曲特效" class="headerlink" title="画面 RGB 扭曲特效"></a>画面 RGB 扭曲特效</h2><p>当我们用鼠标随意在画面上移动时，可以观察到一种微妙的颜色变换效果，这就是著名的 RGB 扭曲特效</p>
<p>这里也用了全屏的后期处理，实现方法其实很简单：对画面进行 3 次采样，采样前偏移 3 个 uv 坐标，再分别获取采样后的 rgb 三个通道，将其合并即可</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">vec4</span> RGBShift(<span class="type">sampler2D</span> t,<span class="type">vec2</span> rUv,<span class="type">vec2</span> gUv,<span class="type">vec2</span> bUv)&#123;</span><br><span class="line">    <span class="type">vec4</span> color1=<span class="built_in">texture</span>(t,rUv);</span><br><span class="line">    <span class="type">vec4</span> color2=<span class="built_in">texture</span>(t,gUv);</span><br><span class="line">    <span class="type">vec4</span> color3=<span class="built_in">texture</span>(t,bUv);</span><br><span class="line">    <span class="type">vec4</span> color=<span class="type">vec4</span>(color1.r,color2.g,color3.b,color2.a);</span><br><span class="line">    <span class="keyword">return</span> color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()&#123;</span><br><span class="line">    <span class="type">vec2</span> p=vUv;</span><br><span class="line">    p=distort(p);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> mask=<span class="number">1.</span>-getCircle(uMaskRadius/uDevicePixelRatio);</span><br><span class="line">    <span class="type">float</span> r=mask*uMouseSpeed*<span class="number">.5</span>;</span><br><span class="line">    <span class="type">float</span> g=mask*uMouseSpeed*<span class="number">.525</span>;</span><br><span class="line">    <span class="type">float</span> b=mask*uMouseSpeed*<span class="number">.55</span>;</span><br><span class="line">    <span class="type">vec4</span> tex=<span class="built_in">texture</span>(tDiffuse,p);</span><br><span class="line"></span><br><span class="line">    <span class="type">vec4</span> col=tex;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">gl_FragColor</span>=col;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里做成了鼠标悬浮到某块区域才触发的特效，因此有了以下的<code>getCircle</code>函数，比较通用，在我之前写过的一些特效中也有用到</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> circle(<span class="type">vec2</span> st,<span class="type">float</span> r,<span class="type">vec2</span> v)&#123;</span><br><span class="line">    <span class="type">float</span> d=<span class="built_in">length</span>(st-v);</span><br><span class="line">    <span class="type">float</span> c=<span class="built_in">smoothstep</span>(r<span class="number">-.2</span>,r+<span class="number">.2</span>,d);</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> getCircle(<span class="type">float</span> radius)&#123;</span><br><span class="line">    <span class="type">vec2</span> viewportP=<span class="built_in">gl_FragCoord</span>.xy/iResolution/uDevicePixelRatio;</span><br><span class="line">    <span class="type">float</span> aspect=iResolution.x/iResolution.y;</span><br><span class="line"></span><br><span class="line">    <span class="type">vec2</span> m=iMouse.xy/iResolution.xy;</span><br><span class="line"></span><br><span class="line">    <span class="type">vec2</span> maskP=viewportP-m;</span><br><span class="line">    maskP/=<span class="type">vec2</span>(<span class="number">1.</span>,aspect);</span><br><span class="line">    maskP+=m;</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> r=radius/iResolution.x;</span><br><span class="line">    <span class="type">float</span> c=circle(maskP,r,m);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/10/30/y4nhKr69PwGZlIX.gif" alt="5.gif"></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>希望本文能给你创作新特效的灵感，keep creating~</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">alphardex</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://alphardex.github.io/mygo/posts/8368/">https://alphardex.github.io/mygo/posts/8368/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><div class="social-share pull-right"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/mygo/posts/54631/"><i class="fa fa-chevron-left">  </i><span>液晶球回归——HTML 与 Raymarching 的结晶</span></a></div><div class="next-post pull-right"><a href="/mygo/posts/29621/"><span>用 kokomi.js 打造飘逸的 3D 轮播效果</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'false' == 'true';
var verify = 'false' == 'true';
var record_ip = 'false' == 'true';
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  recordIP:record_ip,
  appId:'MUKqiaU6CnxOn2VeT4cUBLdG-gzGzoHsz',
  appKey:'nxePlNHUgdOaABmHUoWz4TpR',
  placeholder:'何が言いたいことがある？',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'zh-cn'
})</script></div></div><footer class="footer-bg" style="background-image: url(https://s2.loli.net/2024/05/21/HtNjkzv1FEdAVby.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2024 By alphardex</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/mygo/js/utils.js?version=1.9.1"></script><script src="/mygo/js/fancybox.js?version=1.9.1"></script><script src="/mygo/js/sidebar.js?version=1.9.1"></script><script src="/mygo/js/copy.js?version=1.9.1"></script><script src="/mygo/js/fireworks.js?version=1.9.1"></script><script src="/mygo/js/transition.js?version=1.9.1"></script><script src="/mygo/js/scroll.js?version=1.9.1"></script><script src="/mygo/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>